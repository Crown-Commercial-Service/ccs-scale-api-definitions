openapi: "3.0.1"
info:
  title: "SCALE BaT Basket Service"
  version: v0.01
  description: This API provides access to the Buy a Thing shopping basket functionality. It includes functions to add and remove products from the basket, to save and restore the basket, to manage product wishists, to convert baskets to quotes (and quotes to baskets).
#  PLACEHOLDERs - to be uncommented when implemented
  termsOfService: "http://api.crowncommercial.gov.uk/terms/"
  contact:
    email: "apiteam@crowncommercial.gov.uk"
  license:
    name: "Open Government Licence 3.0"
    url: "https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
#
# TODO:
# 1. Basket - Add/Edit/Delete lineItems
# 2. Wishlists
#
#security:
#  - OAuth2:
#    - read
tags:
- name: "Basket"
  description: "Operations on Active Basket"
  externalDocs:
    description: "Find out more"
    url: "http://apis.crowncommercial.gov.uk"
- name: "Saved Basket"
  description: "Operations on Saved Baskets"
  externalDocs:
    description: "Find out more"
    url: "http://apis.crowncommercial.gov.uk"
- name: "Wishlist"
  description: "Operations on Product wishlists"
  externalDocs:
    description: "Find out more"
    url: "http://apis.crowncommercial.gov.uk"
- name: "Quote"
  description: "Operations on Quotes"
  externalDocs:
    description: "Find out more"
    url: "http://apis.crowncommercial.gov.uk"
paths:
                
  /baskets:
    get:
      summary: Returns all Saved Baskets for the given scope (note not the current basket).
      description: Returns all Saved Baskets for the given scope - user, organisation, buyer group (note not the current basket).
      tags:
      - Saved Basket
      operationId: get-saved-basket-list
      parameters:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-correlation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-causation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-channel'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-client'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/DetailParam'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-params.yaml#/components/parameters/OrderScopeParam'
      responses:
        200:
          description: Array of Saved Baskets for the specified scope ([user],Organisation,BuyerGroup)
          content:
            application/json:
              schema:
                type: "array"
                items:
                  oneOf:
                    - $ref: '#/components/schemas/SavedBasket'
                    - $ref: '#/components/schemas/SavedBasketSummary'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'

  /baskets/{basketID}:
    parameters:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-correlation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-causation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-channel'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-client'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-params.yaml#/components/parameters/BasketParam'

    get:
      summary: Returns the specified Saved Basket 
      description: Returns the specified Saved Basket
      tags:
      - Saved Basket
      operationId: get-saved-basket-detail
      responses:
        200:
          description: Saved Basket
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SavedBasket'
        404:
          description: Not found.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
    delete:
      summary: Deletes the specified Saved Basket 
      description: Deletes the specified Saved Basket
      tags:
      - Saved Basket
      operationId: delete-saved-basket
      responses:
        200:
          description: OK
        401:
          description: Unauthorised.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
        404:
          description: Not found.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
    patch:
      summary: Updates the specified Saved Basket 
      description: Updates the specified Saved Basket
      tags:
      - Saved Basket
      operationId: update-saved-basket
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SavedBasketParams'
      responses:
        200:
          description: Saved Basket
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SavedBasket'
        401:
          description: Unauthorised.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
        404:
          description: Not found.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'

  /baskets/{id}/make-active:
    parameters:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-correlation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-causation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-channel'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-client'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-params.yaml#/components/parameters/BasketParam'

    get:
      summary: Makes the specified Saved Basket the Active Basket 
      description: Makes the specified Saved Basket the Active Basket
      tags:
      - Saved Basket
      operationId: make-saved-basket-active
      parameters:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-correlation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-causation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-channel'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-client'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/DetailParam'
        - name: id
          in: path
          description: Saved Basket ID
          example: R793138650
          required: true
          schema:
            type: string
      responses:
        200:
          description: Details of the Active Basket
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Basket'
        401:
          description: Unauthorised.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
        404:
          description: Not found.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors' 

  /baskets/active:
    get:
      summary: Returns the Active Basket.
      description: Returns the contents of the current Basket for the signed in user (products, variants, quantities)
      tags:
      - Basket
      operationId: get-basket
      parameters:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-correlation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-causation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-channel'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-client'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/DetailParam'
      responses:
        200:
          description: Details of the Active Basket
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Basket'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
                
  /baskets/active/checkout:
    get:
      summary: Triggers the checkout process
      description: For the Active Basket starts a 'checkout' (and returns an array pf per supplier Orders to hand over to the BAT Orders API)
      tags:
      - Basket
      operationId: checkout-basket
      parameters:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-correlation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-causation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-channel'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-client'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/DetailParam'
      responses:
        200:
          description: Order (in checkout process). One order returned per Supplier
          content:
            application/json:
              schema:
                type: "array"
                items:
                  $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/SupplierOrder'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
  /baskets/active/save:
    post:
      summary: Saves the active basket
      description: For the Active Basket saves it with the given name
      tags:
      - Basket
      operationId: save-basket
      parameters:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-correlation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-causation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-channel'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-client'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/DetailParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SavedBasketParams'
      responses:
        200:
          description: Saved basket
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SavedBasket'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
  /baskets/active/quote:
    post:
      summary: Creates quotes from the active basket
      description: Creates one quote per supplier from the active basket
      tags:
      - Basket
      operationId: save-as-quote
      parameters:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-correlation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-causation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-channel'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-client'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/DetailParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateQuoteParams'
      responses:
        200:
          description: Quotes
          content:
            application/json:
              schema:
                type: "array"
                items:
                  $ref: '#/components/schemas/Quote'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
 
  /baskets/active/lineItems:
    post:
      summary: Add a line item to the Active basket
      description: Adds a line item to the Actove basket. Line item will indicate how many of the item the customer wants. The system will define how many are taken from which supplier based on cost
      tags:
      - Basket
      parameters:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-correlation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-causation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-channel'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-client'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/DetailParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NewLineItem'
      responses:
        200:
          description: Details of the Active Basket with the new item added
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Basket'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors' 
 
 
  /quotes:
    get:
      summary: Returns all Quotes for the given scope (note not the current basket).
      description: Returns all Quotes for the given scope - user, organisation, buyer group (note not the current basket).
      tags:
      - Quote
      operationId: get-quote-list
      parameters:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-correlation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-causation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-channel'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-client'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/DetailParam'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-params.yaml#/components/parameters/OrderScopeParam'
      responses:
        200:
          description: Array of Quotes for the specified scope ([user],Organisation,BuyerGroup)
          content:
            application/json:
              schema:
                type: "array"
                items:
                  oneOf:
                    - $ref: '#/components/schemas/Quote'
                    - $ref: '#/components/schemas/QuoteSummary'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'

 
  /quotes/{id}:
    get:
      summary: Returns the specified Quote 
      description: Returns the specified Quote
      tags:
      - Quote
      operationId: get-quote-detail
      parameters:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-correlation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-causation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-channel'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-client'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/DetailParam'
        - name: id
          in: path
          description: Quote ID
          example: Q793138650
          required: true
          schema:
            type: string
      responses:
        200:
          description: Quote
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SavedBasket'
        404:
          description: Not found.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
    delete:
      summary: Deletes the specified Quote
      description: Deletes the specified Quote
      tags:
      - Quote
      operationId: delete-quote
      parameters:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-correlation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-causation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-channel'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-client'
        - name: id
          in: path
          description: Quote ID
          example: Q793138650
          required: true
          schema:
            type: string
      responses:
        200:
          description: OK
        401:
          description: Unauthorised.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
        404:
          description: Not found.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
    patch:
      summary: Updates the specified Quote 
      description: Updates the specified Quote
      tags:
      - Quote
      operationId: update-quote
      parameters:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-correlation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-causation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-channel'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-client'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/DetailParam'
        - name: id
          in: path
          description: Quote ID
          example: Q793138650
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateQuoteParams'
      responses:
        200:
          description: Updated Quote
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Quote'
        401:
          description: Unauthorised.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
        404:
          description: Not found.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'

  /quote/{id}/checkout:
    get:
      summary: Enters checkout for the Quote 
      description: Enters checkout for the Quote
      tags:
      - Quote
      operationId: checkout-quote
      parameters:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-correlation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-causation-id'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-channel'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/x-client'
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Params.yaml#/components/parameters/DetailParam'
        - name: id
          in: path
          description: Quote ID
          example: Q793138650
          required: true
          schema:
            type: string
      responses:
        200:
          description: Order (in checkout process). One order returned per Supplier, thus one per quote, but an array for standard processing
          content:
            application/json:
              schema:
                type: "array"
                items:
                  $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/SupplierOrder'
        401:
          description: Unauthorised.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
        404:
          description: Not found.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/CCS_Standard_API_Schema.yaml#/components/schemas/Errors' 
                  
               
#
components:
#  securitySchemes:
#    OAuth2:
#      type: oauth2
#      flows:
#        authorizationCode:
#          authorizationUrl: http://ccsexample.com/oauth/auth
#          tokenUrl: https://api.crowncommercial.gov.uk/oauth/token
#          scopes:
#            read: Grants read access
#           only read for MVP
  schemas:
# TODO
# 1. remember to do oneOf for Detail/Summary for the depths of the Order object
    Basket:
      allOf:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/OrderBase'

    NewLineItem:
      type: object
      properties:
        item:
          $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/ItemID'
        itemDeliveryAddressID:
          type: number
          format: integer
          example: 1234
        quantity:
          type: number
          description: The number of the Item being purchased (for this delivery address)
          format: integer
          example: 5

    SavedBasket:
      allOf:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/OrderBase'
      type: object
      properties:
        name:
          type: string
          description: Name given to the basket when it was saved
          example: "Equipment for new starter"
        savedDate:
          type: string
          format: date-time
          example: "2020-12-25T17:32:28Z"
        shareLevel:
          $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/ShareScope'

    SavedBasketSummary:
      allOf:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/OrderBaseSummary'
      type: object
      properties:
        name:
          type: string
          description: Name given to the basket when it was saved
          example: "Equipment for new starter"
        savedDate:
          type: string
          format: date-time
          example: "2020-12-25T17:32:28Z"
        shareLevel:
          $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/ShareScope'

    SavedBasketParams:
      type: object
      properties:
        name:
          type: string
          description: The name of the saved Basket
          example: Standard Office Equipment
        shareLevel:
          $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/ShareScope'
  
    CreateQuoteParams:
      type: object
      properties:
        name:
          type: string
          description: The name of the Quote
          example: Standard Office Equipment
        shareLevel:
          $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/ShareScope'
        poNumber:
          type: string
          description: Purchase Order Number for the quote(s)
          example: PO453726218
  
    UpdateQuoteParams:
      type: object
      properties:
        name:
          type: string
          description: The name of the Quote
          example: Standard Office Equipment
        shareLevel:
          $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/ShareScope'
        supplierStatus:
          $ref: '#/components/schemas/QuoteSupplierStatus'
        buyerApprovalStatus:
          $ref: '#/components/schemas/QuoteBuyerStatus'
        poNumber:
          type: string
          description: Purchase Order Number for the quote(s)
          example: PO453726218
  
    Quote:
      allOf:
        - $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/OrderBase'
      type: object
      properties:
        name:
          type: string
          description: the name of the quote
          example: R123436
        purchaseOrderNumber:
          type: string
          description: Buyer purchase order number
          example: PO1234
        shareLevel:
          $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/ShareScope'
        supplierStatus:
          $ref: '#/components/schemas/QuoteSupplierStatus'
        buyerApprovalStatus:
          $ref: '#/components/schemas/QuoteBuyerStatus'

    QuoteSummary: 
      type: object
      properties:
        id:
          $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/OrderID'
        totalPrice:
          $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/Price'
        ownerUserEmail: # Should this be name?
            type: string
            description: The email address of the user who created the order
            example: Joe.Smith@crowncommercial.gov.uk
        ownerOrganizationName:
            type: string
            description: The name of the Buyer Organisation
            example: Crown Commercial Service
        lastUpdatedDate:
          type: string
          format: date-time
          example: "2020-12-25T17:32:28Z"
        lineItemNumber:
          type: number
          format: integer
          description: The number of line items in the quote
        name:
          type: string
          description: the name of the quote
          example: R123436
        purchaseOrderNumber:
          type: string
          description: Buyer purchase order number
          example: PO1234
        shareLevel:
          $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-scale-api-definitions/CAT_initial/bat/bat-schema.yaml#/components/schemas/ShareScope'
        supplierStatus:
          $ref: '#/components/schemas/QuoteSupplierStatus'
        buyerApprovalStatus:
          $ref: '#/components/schemas/QuoteBuyerStatus'
        
        
    QuoteSupplierStatus:
      type: object
      properties:
        status:
          description: The status of the quote (through the checkout/sales process)
          enum: [created,accepted,rejected]
        date:
          type: string
          format: date
          description: The date at which the quote was accepted/rejected by the supplier
          example: 2020-12-25
        supplierContact:
          $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/OCDS_Schema.yaml#/components/schemas/ContactPoint'

    QuoteBuyerStatus:
      type: object
      properties:
        status:
          description: The status of the quote (through the checkout/sales process)
          enum: [created,approved,rejected]
        date:
          type: string
          format: date
          description: The date at which the quote was approved/rejected by the buyer
          example: 2020-12-25
        buyerContact:
          $ref: 'https://raw.githubusercontent.com/Crown-Commercial-Service/ccs-api-definitions-common/main/CCS_OpenAPI_Standards/OCDS_Schema.yaml#/components/schemas/ContactPoint'


  ############## TO BE MOVED TO CENTRAL FILE ############


        
servers:
  # Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/davejhughes/BaT-Basket/v0.01